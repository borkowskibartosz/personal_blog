{% extends "base.html" %}
{% load static %}

{% block content %}
  <!-- Page Content -->
  <div class="container">

    <div class="row">

      <!-- Post Content Column -->
      <div class="col-lg-8">

        <!-- Title -->
        <h1 class="mt-4">{{post.title}}</h1>

        <!-- Author -->
        <p class="lead">
          by
          <a href="{% url 'author_posts' post.author %}">{{post.author}}</a>
        </p>
        <p>
          {%for category in post.categories.all%}
          <button type="button" class="btn btn-secondary">{{category.name}}</button>
          {% endfor %}
        </p>
        <hr>

        <!-- Date/Time -->
        <p>Posted on {{post.created_on}}</p>

        <hr>

        <!-- Preview Image -->
        <img class="img-fluid rounded" src="http://placehold.it/900x300" alt="">

        <hr>

        {{post.content|safe}}

        <!-- Post Content -->
        <hr>
        {% if user.is_authenticated %}
        <!-- Comments Form -->
       
        <div class="card my-4">
          <h5 class="card-header">Leave a Comment:</h5>
          <div class="card-body">
            <form method='POST'>
              {% csrf_token %}
              <div class="form-group">
              {% comment %} {{form.as_p}} {% endcomment %}
                <textarea class="form-control" rows="3" name='content'></textarea> 
              </div>
              <button type="submit" class="btn btn-primary" >Submit</button>
            </form>
          </div>
        </div>
        </form>
        {% endif %}

        {% for comment in comments %}

        <!-- Single Comment -->
        {% comment %} TODO: CRUD for comment {% endcomment %}
        <div class="media mb-4">
          <img class="d-flex mr-3 rounded-circle" src="http://placehold.it/50x50" alt="">
          <div class="media-body">
            <h5 class="mt-0">{{comment.author}} </h5>
            {{comment.content}}
          </div>
        </div>

        {% endfor %}


      </div>

{% endblock %}
